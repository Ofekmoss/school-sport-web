define(["templates/manage","manage/dal","utils","components/multiselect-search","components/selectex"],function(e,t,o){var i=Vue.extend({template:e["filters-students"],props:{initFilters:Object,upCount:0},data:function(){return{regions:[],cities:[],schools:[],grades:[],genders:[{id:0,name:"לא ידוע"},{id:1,name:"בן"},{id:2,name:"בת"}],categories:[],result:{region:null,city:null,school:null,grade:null,gender:null}}},watch:{},mounted:function(){var l=this;l.grades=t.getGrades(),o.promiseAll([t.getRegions(),t.getCities(),t.getSchools()]).then(function(e){if(l.regions=e[0].data,l.cities=e[1].data,l.schools=e[2],l.initFilters){if(l.initFilters.region){var t=o.getById(l.regions,l.initFilters.region);l.result.region=t||null}if(l.initFilters.city){var i=o.getById(l.cities,l.initFilters.city);l.result.city=i||null}if(l.initFilters.school){var s=o.getById(l.schools,l.initFilters.school);l.result.school=s||{}}if(l.initFilters.gender){var r=o.getById(l.genders,l.initFilters.gender);l.result.gender=r||{}}if(l.initFilters.grade){var n=o.getById(l.grades,l.initFilters.grade);l.result.grade=n||{}}l.upCount++,l.load()}})},methods:{load:function(){this.result.description="תלמידים",this.result.region&&(this.result.description+="-"+this.result.region.name),this.result.city&&(this.result.description+="-"+this.result.city.name),this.result.school&&(this.result.description+="-"+this.result.school.name),this.result.grade&&(this.result.description+="-"+this.result.grade.name),this.result.gender&&(this.result.description+="-"+this.result.gender.name),this.$emit("change",this.result)}},watch:{"result.school":function(e){null===e&&(this.grades=[])}}});Vue.component("filters-students",i)});