define(["templates/manage","manage/dal","utils","components/multiselect-search","components/selectex"],function(t,i,n){var e=Vue.extend({template:t["filters-schools"],props:{initFilters:Object,upCount:0},data:function(){return{regions:[],cities:[],result:{region:null,city:null}}},watch:{},mounted:function(){var s=this;n.promiseAll([i.getRegions(),i.getCities()]).then(function(t){if(s.regions=t[0].data,s.cities=t[1].data,s.initFilters){if(s.initFilters.region){var i=n.getById(s.regions,s.initFilters.region);s.result.region=i||null}if(s.initFilters.city){var e=n.getById(s.cities,s.initFilters.city);s.result.city=e||null}s.upCount++,s.load()}})},methods:{load:function(){this.result.description="בתי ספר",this.result.region&&(this.result.description+="-"+this.result.region.name),this.result.city&&(this.result.description+="-"+this.result.city.name),this.$emit("change",this.result)}}});Vue.component("filters-schools",e)});