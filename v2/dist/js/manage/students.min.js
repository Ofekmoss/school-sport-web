define(["templates/manage","manage/dal","utils","manage/filters-students","manage/new-student","manage/data-table2","components/multiselect"],function(e,i,t){var n=[{key:"FirstName",name:"שם פרטי",active:!0,type:"text"},{key:"LastName",name:"שם משפחה",active:!0,type:"text"},{key:"IdNumber",name:"תעודת זהות",active:!0,type:"text"},{key:"BirthDate",name:"תאריך לידה",active:!0,type:"text"},{key:"Gender",name:"מין",active:!0,type:"text"},{key:"Grade",name:"כיתה",active:!0,type:"text"},{key:"School.Name",name:"בית ספר",active:!0,type:"text"},{key:"Region.Name",name:"מחוז",active:!0,type:"text"}];return Vue.extend({template:e.students,data:function(){return{tabName:"תלמידים",caption:"תלמידים",image:"img/icon-students.svg",records:[],columns:n,selectedRecord:null,initFilters:{}}},props:{region:{},city:{},school:{},grade:{},gender:{}},mounted:function(){this.region=this.region?parseInt(this.region):"",this.city=this.city?parseInt(this.city):"",this.school=this.school?parseInt(this.school):"",this.grade=this.grade?parseInt(this.grade):"",this.gender=this.gender?parseInt(this.gender):"",this.initFilters={region:this.region,city:this.city,school:this.school,grade:this.grade,gender:this.gender}},methods:{updateCaption:function(e){this.caption=e},saveRecord:function(){console.log("saving... ",this.selectedRecord)},refresh:function(e){if(e&&(this.updateCaption(e.description),this.region=e.region&&-1!=e.region.id?e.region.id:"",this.city=e.city&&-1!=e.city.id?e.city.id:"",this.school=e.school&&-1!=e.school.id?e.school.id:"",this.grade=e.grade&&-1!=e.grade.id?e.grade.id:"",this.gender=e.gender&&-1!=e.gender.id?e.gender.id:""),!e||e.school){var t=this;i.getStudents(e).then(function(e){t.records=e.data})}else this.records.splice()},onRecordSelect:function(e){this.selectedRecord=t.mergeDeep({},e[0])},onNewTeamClick:function(){this.selectedRecord={}}}})});