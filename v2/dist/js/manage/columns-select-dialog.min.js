define(["templates/manage"],function(e){return Vue.extend({template:e["columns-select-dialog"],data:function(){return{columns:[],reachedMax:!1,max:null,key:null,selectionChanged:!1,totalActive:0}},mounted:function(){var e=this;e.totalActive=e.columns.reduce(function(e,t){return t.active?++e:e},0),e.reachedMax=!!e.max&&e.totalActive>=e.max;for(var t=0;t<e.columns.length;t++){var n=e.columns[t];if(null!=n.originalActive&&n.originalActive!==n.active){e.selectionChanged=!0;break}}},methods:{cancel:function(){this.$emit("close")},resetCache:function(){this.key&&this.columns.forEach(function(e){e.active=e.originalActive||!1})},select:function(){var e=this;if(e.key){var t=e.columns.filter(function(e){return!0===e.active});if(0<t.length){var n=t.map(function(e){var t=e.id;return null!=t&&0!==t.length||(t=Array.isArray(e.key)?e.key.join("."):e.key.toString()),t}).filter(function(e){return 0<e.length});if(0<n.length){var i=e.key+"-columns";Vue.http.post("/api/v2/cache",{key:i,value:n.join(",")})}}}this.$emit("close",e.columns)},onColumnChange:function(e){var t=this;t.totalActive=t.columns.reduce(function(e,t){return t.active?++e:e},0),t.reachedMax=!!t.max&&t.totalActive>=t.max}}})});