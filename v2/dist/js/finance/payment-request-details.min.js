define(["templates/finance","utils","dialog","services/access","consts","components/multiselect","generic/data-table"],function(e,t,n,a,i){return Vue.extend({template:e["payment-request-details"],props:{paymentRequestId:{}},data:function(){return{tabName:"כספים",caption:"תעודת חיוב",image:"img/finance.svg",user:a.user,paymentRequestDetails:[],columns:[{key:"payerName",name:"חשבון / גורם משלם",active:!0},{key:"schoolName",name:"שם בית ספר",active:!0},{key:"championshipType",name:"סוג חיוב",active:!0},{key:"championshipName",name:"אליפות",active:!0},{key:"teamNumber",name:"אינדקס קבוצה",active:!0},{key:"totalAmount",name:"סכום",active:!0},{key:"createdAt",name:"תאריך יצירה",type:"date",active:!0},{key:"paidAmount",name:"שולם",active:!0},{key:"remainingAmount",name:"נותר לתשלום",active:!0}],searchText:""}},mounted:function(){this.caption="פרטים נוספים - "+t.parseDocumentNumber(this.paymentRequestId),function(a,i){void 0===i&&(i=function(){}),a.paymentRequestDetails.splice(0,a.paymentRequestDetails.length),Vue.http.get("/api/v2/finance/payment-request-details/"+a.paymentRequestId).then(function(e){for(var t=0;t<e.body.length;t++){var n=e.body[t];0===n.remainingAmount&&(0<n.paidAmount?n.green=!0:n.red=!0),a.paymentRequestDetails.push(n)}i()},function(e){console.log(e),i()})}(this)},watch:{},methods:{downloadPaymentRequest:function(){t.downloadPayment(this.paymentRequestId)},viewPaymentRequest:function(){window.open(t.getPaymentUrl(this.paymentRequestId),"_blank")},sumAll:function(t){var n=0;return this.paymentRequestDetails.forEach(function(e){e.hidden||(n+=e[t])}),n},logout:function(){a.logout()}}})});