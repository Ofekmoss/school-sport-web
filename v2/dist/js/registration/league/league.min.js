define(["templates/registration","services/access","registration/league/league-details","registration/league/league-teams","registration/league/league-payment","registration/league/league-players","utils"],function(e,t,n,a,i,s,u){function o(e){return e}function r(n,a){Vue.http.get("/api/v2/registration/league").then(function(e){var t=e.data.stage;0<t?function(e,t){Vue.http.get("/api/v2/registration/league/teams/"+encodeURIComponent(e)).then(function(e){t(null,e.body)},function(e){console.log(e),t()})}(n,function(e,t){var n=1;null!=t.payment?n=3:t.approved&&1==(1&t.approved)&&(n=2),a(null,n)}):a(null,t)},function(e){a(e)})}return Vue.extend({template:e.league,data:function(){return{user:t.user,pages:[n,a,i,s],teamId:null,page:null,pageNumber:1,disable:900,seasons:null,seasonAuthorized:!1}},computed:{currentPage:function(){return null==this.page?-1:this.pages.indexOf(this.page)}},mounted:function(){var n=this;Vue.http.get("/api/v2/seasons").then(function(e){n.seasons=e.data}),Vue.http.get("/api/v2/login").then(function(e){n.username=e.data.name},function(e){console.log(e)}),u.checkSeasonAuthorization(n.user,function(e,t){1==t&&(n.seasonAuthorized=!0)}),r(this.team,function(e,t){n.pageNumber=o(t),n.page=n.pages[n.pageNumber]})},methods:{getSeason:function(){var t=this;if(t.user&&t.user.season&&t.seasons){var e=t.seasons.find(function(e){return e.id===t.user.season});if(null!=e)return e.name}return""},inactiveSeason:function(){return u.inactiveSeason(this)},goToPage:function(e){e<=this.pageNumber&&this.disable>e&&(this.page=this.pages[e])},handleNext:function(e){this.pageNumber=o(e),this.page=this.pages[this.pageNumber]},logout:function(){t.logout()},disableNext:function(e){this.disable=e}}})});