define(["templates/registration","services/access","registration/club/club-details","registration/club/club-teams","registration/club/club-payment","registration/club/club-players","utils"],function(e,a,n,t,o,s,i){function r(e){return e}return Vue.extend({template:e.club,data:function(){return{user:a.user,pages:[n,t,o,s],page:null,pageNumber:1,school:null,seasons:null,seasonAuthorized:!1}},computed:{currentPage:function(){return null==this.page?-1:this.pages.indexOf(this.page)}},mounted:function(){var t=this;window.setTimeout(function(){t.user.season||document.location.reload()},1e3),Vue.http.get("/api/v2/seasons").then(function(e){t.seasons=e.data}),Vue.http.get("/api/v2/login").then(function(e){t.school=e.data.school,t.username=e.data.name},function(e){console.log(e)}),i.checkSeasonAuthorization(t.user,function(e,a){1==a&&(t.seasonAuthorized=!0)}),Vue.http.get("/api/v2/registration/club").then(function(e){var n=e.data.stage;0<n?Vue.http.get("/api/v2/registration/club/details").then(function(e){var a={};a.school=e.data.school||{},a.principal=e.data.principal||{},a.chairman=e.data.chairman||{},a.coordinator=e.data.coordinator||{},a.representative=e.data.representative||{},a.association=e.data.association||{},!(a.school.name&&a.school.phoneNumber&&a.school.email&&a.school.address&&a.principal.name&&a.chairman.name&&a.coordinator.name&&a.representative.name&&a.principal.phoneNumber&&a.chairman.phoneNumber&&a.coordinator.phoneNumber&&a.representative.phoneNumber&&a.principal.email&&a.chairman.email&&a.coordinator.email&&a.representative.email)&&(n=0),t.pageNumber=r(n),t.page=t.pages[t.pageNumber]},function(e){console.log(e),t.pageNumber=r(n),t.page=t.pages[t.pageNumber]}):(t.pageNumber=r(n),t.page=t.pages[t.pageNumber])},function(e){console.log(e)})},methods:{getSeason:function(){var a=this;if(a.user&&a.user.season&&a.seasons){var e=a.seasons.find(function(e){return e.id===a.user.season});if(null!=e)return e.name}return""},inactiveSeason:function(){var e=this;return!!(e.user&&e.user.season&&e.user.activeSeason)&&e.user.season!==e.user.activeSeason},goToPage:function(e){e<=this.pageNumber&&(this.page=this.pages[e]);4===e&&(window.open("/api/v2/registration/club/summary/download/school-"+this.school+"-summary.pdf").onload=function(){})},handleNext:function(e){this.pageNumber=r(e),this.page=this.pages[this.pageNumber]},logout:function(){a.logout()}}})});