define(["templates/registration","services/access","registration/project/project-general","registration/project/project-school-details","registration/project/project-teams"],function(e,t,s,n,a){var i=[{id:1,name:"זוזו",link:"zuzu"},{id:2,name:'פכ"ל',link:"pcl"},{id:3,name:"פלא",link:"pele"}];return Vue.extend({template:e.project,data:function(){return{user:t.user,project:null,pages:[s,n,a],page:null,pageNumber:0,school:null,seasons:null}},computed:{currentPage:function(){return null==this.page?-1:this.pages.indexOf(this.page)}},mounted:function(){var t=this;Vue.http.get("/api/v2/seasons").then(function(e){t.seasons=e.data}),Vue.http.get("/api/v2/login").then(function(e){t.username=e.data.name},function(e){console.log(e)});for(var e=0;e<i.length;e++){var s=i[e];if(this[s.link]){this.project=s;break}}this.project&&(t.page=t.pages[0])},methods:{getSeason:function(){var t=this;if(t.user&&t.user.season&&t.seasons){var e=t.seasons.find(function(e){return e.id===t.user.season});if(null!=e)return e.name}return""},goToPage:function(e){0<e&&!this.school||1<e&&!this.school.stage||(this.pageNumber=e,this.page=this.pages[e])},handlePage:function(e){this.pageNumber=e,this.page=this.pages[this.pageNumber]},logout:function(){t.logout()}},watch:{school:{handler:function(){this.school?0<this.school.stage?this.pageNumber=2:this.pageNumber=1:this.pageNumber=0,this.page=this.pages[this.pageNumber]},deep:!0}}})});