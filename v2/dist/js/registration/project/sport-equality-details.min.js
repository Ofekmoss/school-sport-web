define(["templates/registration","dialog"],function(t,i){return Vue.extend({template:t["sport-equality-details"],data:function(){return{name:"",managerName:"",symbol:"",address:"",socioEconomicRank:"",geographicIndex:"",totalPopulation:"",youngPhysicalOnly:"",totalMentallyChallenged:"",youngIntellectualOnly:"",youngPhysicalAndIntellectual:"",youngMentallyChallenged:"",manager:{},supervisor:{},isFormValid:!1,confirmation:!1,confirmedAt:null}},computed:{},mounted:function(){var e=this;Vue.http.get("/api/v2/registration/project/5").then(function(t){if((t=t.body).id){var i=t.item1?JSON.parse(t.item1):{};e.name=t.city.name,e.managerName=t.city.managerName,e.symbol=t.city.symbol,e.address=t.city.address,e.socioEconomicRank=t.city.socioEconomicRank,e.geographicIndex=t.city.geographicIndex,e.totalPopulation=i.tp,e.youngPhysicalOnly=i.ypo,e.totalMentallyChallenged=i.tmc,e.youngIntellectualOnly=i.yio,e.youngPhysicalAndIntellectual=i.ypi,e.youngMentallyChallenged=i.ymc,e.manager=t.manager,e.supervisor=t.supervisor,setTimeout(function(){e.checkValidity()}),Vue.http.get("/api/v2/registration/school-confirmations").then(function(t){for(var i=0;i<t.body.length;i++){var n=t.body[i];if("sport-equality-details"===n.Form){e.confirmation=!0,e.confirmedAt=n.DateConfirmed;break}}e.confirmedAt},function(t){console.log(t)})}})},methods:{next:function(){var i=this,t={tp:this.totalPopulation,ypo:this.youngPhysicalOnly,yio:this.youngIntellectualOnly,ypi:this.youngPhysicalAndIntellectual,tmc:this.totalMentallyChallenged,ymc:this.youngMentallyChallenged};(function(t){return Vue.http.put("/api/v2/registration/project/5",t)})({city:{managerName:this.managerName,symbol:this.symbol,address:this.address,socioEconomicRank:this.socioEconomicRank,geographicIndex:this.geographicIndex},item1:JSON.stringify(t),manager:this.manager,supervisor:this.supervisor}).then(function(){if(i.$emit("next"),!i.confirmedAt){Vue.http.post("/api/v2/registration/confirmation",{Form:"sport-equality-details"}).then(function(t){i.confirmedAt=new Date},function(t){console.log(t)})}})},checkValidity:function(){this.isFormValid=0==document.querySelectorAll("#form :invalid").length&&this.confirmation}},watch:{name:function(){this.checkValidity()},managerName:function(){this.checkValidity()},symbol:function(){this.checkValidity()},address:function(){this.checkValidity()},socioEconomicRank:function(){this.checkValidity()},geographicIndex:function(){this.checkValidity()},totalPopulation:function(){this.checkValidity()},youngPhysicalOnly:function(){this.checkValidity()},totalMentallyChallenged:function(){this.checkValidity()},youngIntellectualOnly:function(){this.checkValidity()},youngMentallyChallenged:function(){this.checkValidity()},youngPhysicalAndIntellectual:function(){this.checkValidity()},manager:function(){this.checkValidity()},supervisor:function(){this.checkValidity()},confirmation:function(){this.checkValidity()}}})});