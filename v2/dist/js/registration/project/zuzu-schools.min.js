define(["templates/registration","dialog"],function(t,s){function i(e){Vue.http.get("/api/v2/registration/project/1").then(function(t){e.schools=t.body.schools,e.selectionCount=0})}return Vue.extend({template:t["zuzu-schools"],data:function(){return{schools:[],selectionCount:0,selectAll:!1}},mounted:function(){i(this)},methods:{handleSelectionChange:function(){for(var t=this.selectionCount=0;t<this.schools.length;t++)this.schools[t].selected&&this.selectionCount++;this.selectAll=this.selectionCount==this.schools.length},handleSelectAll:function(){if(this.selectAll){for(var t=0;t<this.schools.length;t++)this.schools[t].selected=!0;this.selectionCount=this.schools.length}else{for(t=0;t<this.schools.length;t++)this.schools[t].selected=!1;this.selectionCount=0}},isFormValid:function(){return!0},next:function(){console.log("next")},newSchool:function(){var o=this;s.open("registration/project/zuzu-school-dialog",{},function(t,e){null!=e&&i(o)})},editSchool:function(){var o=this,t=this.schools.find(function(t){return t.selected});s.open("registration/project/zuzu-school-dialog",{school:t,state:3},function(t,e){null!=e&&i(o)})},deleteSchool:function(){var o=this,n=o.schools.filter(function(t){return t.selected}).map(function(t){return t.id});0!==n.length&&s.open("general/message-box",{caption:"מחיקת בית ספר",message:1===n.length?"האם להסיר את רישום בית הספר מהתכנית?":"האם להסיר את רישום בתי הספר מהתכנית?",alert:!0,confirmText:"כן",cancelText:"לא"},function(t,e){!0===e&&function(t){return Vue.http.post("/api/v2/registration/project/1/school/delete",t)}(n).then(function(){i(o)}).catch(function(t){s.open("general/message-box",{caption:"מחיקת בית ספר",message:"אירעה שגיאה במחיקת קבוצה, יש לוודא שלא משויכות כיתות לבית הספר לפני מחיקתו",alert:!0})})})},next:function(){this.$emit("next")}},watch:{}})});