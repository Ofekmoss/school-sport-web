define(["templates/components"],function(e){var t=Vue.extend({template:e.selectex,props:{value:{},options:{type:Array,default:[]},placeholder:{type:String,default:""},label:{type:String,default:"name"},searchOverride:{type:String,default:""},init:{type:Object,default:{value:0,key:"Id"}}},data:function(){return{open:!1,search:"",filteredOptions:this.options}},mounted:function(){var e=this;null!=e.searchOverride&&0<e.searchOverride.length&&(console.log("looking for "+e.searchOverride),window.setTimeout(function(){},2500)),0===e.init.value&&(e.init.value=null),e.init.value},methods:{getValueHtml:function(e){return this.label instanceof Function?this.label(e):"string"==typeof this.label?e[this.label]:null},toggleOpen:function(){var t=this;t.open=!t.open,t.open?(document.onclick=function(e){t.$el.contains(e.target)||(document.onclick=null,document.onblur=null,t.open=!1)},document.onblur=function(e){document.onclick=null,document.onblur=null,t.open=!1},setTimeout(function(){var e=t.$el.querySelector(".search input");e&&e.focus()},0)):t.$el.focus()},selectOption:function(e){this.value=e,document.onclick=null,document.onblur=null,this.open=!1,this.$el.focus()},onKeyDown:function(e){if(e.altKey)40==e.keyCode&&(e.preventDefault(),this.toggleOpen());else if(38==e.keyCode){e.preventDefault(),0<(t=null==this.value?0:this.filteredOptions.indexOf(this.value))&&(this.value=this.filteredOptions[t-1])}else if(40==e.keyCode){if(e.preventDefault(),null==this.value)return void(this.value=0<this.filteredOptions.length?this.filteredOptions[0]:null);var t;-1!=(t=this.filteredOptions.indexOf(this.value))&&(this.value=this.filteredOptions[t+1])}else 13==e.keyCode&&this.open&&(e.preventDefault(),document.onclick=null,document.onblur=null,this.open=!1,this.$el.focus())},clear:function(){this.value=null}},watch:{searchOverride:function(){this.search=this.searchOverride},options:function(){this.filteredOptions=this.options,this.init=Object.assign({},this.init),this.open=!1,this.search=""},value:function(){this.$emit("input",this.value)},search:function(){var e=this.search.trim().toLowerCase();if(""===e)this.filteredOptions=this.options;else{this.filteredOptions=[];for(var t=0;t<this.options.length;t++){var n=this.options[t],i=this.getValueHtml(n);if(null!=i){for(var l="",o=!1,s=0;s<i.length;s++){var u=i[s];o?">"===u&&(o=!1):"<"===u?o=!0:l+=u}l&&0<=l.toLowerCase().indexOf(e)&&this.filteredOptions.push(n)}}}},initialize:function(t){this.value=this.options.find(function(e){return e[t.key]===t.value})}}});Vue.component("selectex",t)});