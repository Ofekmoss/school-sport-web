define(["templates/admin"],function(t){return Vue.extend({template:t["add-city"],data:function(){return{cities:[],selectedCity:null,city:null,hasUser:!1,login:null,password:null}},mounted:function(){},watch:{city:function(){this.password=null,this.hasUser=!1,this.selectedCity=null;for(var t=parseInt(this.city),s=0;s<this.cities.length;s++){var i=this.cities[s];if(i.id==t)return this.selectedCity=i,this.hasUser=!!i.user,void(this.login=i.user?i.user.login:"")}this.login=null}},methods:{close:function(){this.$emit("close")},confirm:function(){var s=this,i=parseInt(this.city);if(!this.hasUser||this.login!==this.selectedCity.user.login||this.password&&0!==this.password.length){var t={login:this.login};this.password&&0<this.password.length&&(t.password=this.password),Vue.http.post("/api/v2/cities/"+i+"/user",t).then(function(t){s.$emit("close",{city:i,user:t.body})},function(t){console.log(t)})}else this.$emit("close",{city:i})}}})});