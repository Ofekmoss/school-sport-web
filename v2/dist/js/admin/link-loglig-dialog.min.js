define(["templates/admin","dialog","utils","components/selectex"],function(i,e,t){return Vue.extend({template:i["link-loglig-dialog"],data:function(){return{category:null,categoryName:null,seasons:[{Id:1395,Name:"2022-2023"}],events:[],competitions:[],disciplines:[],loading:!1,season:null,event:null,competition:null,discipline:null,competitionSelected:!1,changed:!1}},mounted:function(){var t=this;Vue.http.get("/api/v2/admin/competitions/"+this.category+"/events").then(function(i){t.events.splice(0,t.events.length);for(var e=0;e<i.body.length;e++)t.events.push(i.body[e])},function(i){console.log(i)}),Vue.http.get("https://loglig.com:8443/api/Leauges/AthleticsSeasons/49").then(function(i){if(i){t.seasons.splice(0,t.seasons.length);for(var e=0;e<i.body.length;e++)t.seasons.push(i.body[e]);t.seasons.sort(function(i,e){return i.Name.localeCompare(e.Name)}),t.season=t.seasons[t.seasons.length-1].Id}},function(i){console.log("error:"),console.log(i)})},methods:{toggleCompetition:function(i){this.competition==i?this.competition=null:this.competition=i},toggleDiscipline:function(i){this.discipline==i?this.discipline=null:this.discipline=i},cancel:function(){this.competitionSelected?(this.competitionSelected=!1,this.competition=null):this.$emit("close")},next:function(){if(this.competition){var t=this;t.competitionSelected=!0,t.loading++,Vue.http.get("https://loglig.com:8443/api/Leauges/"+t.competition.Id+"?ln=1").then(function(i){if(t.loading--,i&&(t.disciplines.splice(0,t.disciplines.length),i.body.CompetitionDisciplines)){for(var e=0;e<i.body.CompetitionDisciplines.length;e++)t.disciplines.push(i.body.CompetitionDisciplines[e]);t.disciplines.sort(function(i,e){return i.DisciplineName.localeCompare(e.DisciplineName)||i.CategoryName.localeCompare(e.CategoryName)})}},function(i){t.loading--,console.log("error:"),console.log(i)})}},save:function(){var i=this;this.event&&Vue.http.post("/api/v2/admin/competitions/loglig",{competition:this.event.CompetitionId,logligId:this.discipline}).then(function(){i.event.LogligId=i.discipline,i.discipline=null,i.competition=null,i.competitionSelected=!1},function(i){console.log(i)})},clear:function(){var i=this;this.event&&Vue.http.post("/api/v2/admin/competitions/loglig",{competition:this.event.CompetitionId,logligId:null}).then(function(){i.event.LogligId=null,i.discipline=null,i.competition=null,i.competitionSelected=!1},function(i){console.log(i)})}},watch:{season:function(){var n=this;n.loading++,Vue.http.get("https://loglig.com:8443/api/Leauges/AthleticsCompetitions/49/1395").then(function(i){if(n.loading--,i){n.competitions.splice(0,n.competitions.length);for(var e=0;e<i.body.length;e++){var t=i.body[e];t.date=new Date(t.StartDate_datetime),n.competitions.push(t)}n.competitions.sort(function(i,e){var t=i.Title.localeCompare(e.Title);return t||(t=i.date-e.date),t})}},function(i){n.loading--,console.log("error:"),console.log(i)})},event:function(){this.discipline=this.event?this.event.LogligId:null}}})});